from selenium import webdriver
from selenium.webdriver.firefox.options import Options
from selenium.webdriver.firefox.service import Service  
from selenium.webdriver.firefox.firefox_profile import FirefoxProfile
from selenium.webdriver.common.by import By
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.support import expected_conditions as EC
import pdb
import time


# Caminho para o Gecko Driver (se não estiver no PATH)
gecko_driver_path = './geckodriver-v0.34.0-linux64/geckodriver'  # Substitua pelo caminho correto
profile_path = '/home/brpl/snap/firefox/common/.mozilla/firefox/xyssuzza.default'  

# Opções do Firefox (opcional)
options = Options()
options.add_argument("-profile")
options.add_argument(profile_path)  # Perfil do Firefox 

# Exemplo: Iniciar o Firefox em modo headless (sem interface gráfica)
# Crie um objeto Service (para versões mais recentes do Selenium)
service = Service(executable_path=gecko_driver_path)

# Crie o driver do Firefox
driver = webdriver.Firefox(service=service, options=options)

# Navegue para uma página
#driver.add_cookie({'name' : 'projudi', 'value' : 'bar', 'path' : './cookies-projudi-tjpr-jus-br.txt'})
#driver.add_cookie({'name' : 'tjpr', 'value' : 'bar', 'path' : './cookies-tjpr-jus-br.txt'})

def slp(seconds):
    time.sleep(seconds)

slp(4)
token = '3add6bfea5281db78cd9c4236e4532c7363c900d24cb12e48b34e32704d6922131766a68517b720d20913cc23406c8fa'

driver.get(f"https://projudi.tjpr.jus.br/projudi/processo/buscaProcessosQualquerInstancia.do?_tj={token}")
slp(4)

processos = ['0003044-55.2023.8.16.7000','0003025-49.2023.8.16.7000','0003029-86.2023.8.16.7000','0003027-19.2023.8.16.7000','0003038-48.2023.8.16.7000','0003042-85.2023.8.16.7000','0003047-10.2023.8.16.7000','0003048-92.2023.8.16.7000','0003057-54.2023.8.16.7000','0003060-09.2023.8.16.7000','0003058-39.2023.8.16.7000','0002564-77.2023.8.16.7000','0003428-18.2023.8.16.7000','0003595-35.2023.8.16.7000','0003646-46.2023.8.16.7000','0003756-45.2023.8.16.7000','0003757-30.2023.8.16.7000','0003790-20.2023.8.16.7000','0003924-47.2023.8.16.7000','0003925-32.2023.8.16.7000','0003928-84.2023.8.16.7000','0004006-78.2023.8.16.7000','0004011-03.2023.8.16.7000','0004016-25.2023.8.16.7000','0004034-46.2023.8.16.7000','0004040-53.2023.8.16.7000','0004110-70.2023.8.16.7000','0004112-40.2023.8.16.7000','0004313-32.2023.8.16.7000','0004425-98.2023.8.16.7000','0004484-86.2023.8.16.7000','0004487-41.2023.8.16.7000','0004489-11.2023.8.16.7000','0004547-14.2023.8.16.7000','0004915-23.2023.8.16.7000','0004946-43.2023.8.16.7000','0004974-11.2023.8.16.7000','0005036-51.2023.8.16.7000','0005061-64.2023.8.16.7000','0005118-82.2023.8.16.7000','0005137-88.2023.8.16.7000','0005289-39.2023.8.16.7000','0005310-15.2023.8.16.7000','0005467-85.2023.8.16.7000','0005563-03.2023.8.16.7000','0005756-18.2023.8.16.7000','0005800-37.2023.8.16.7000','0005803-89.2023.8.16.7000','0005808-14.2023.8.16.7000','0005809-96.2023.8.16.7000','0005810-81.2023.8.16.7000','0005811-66.2023.8.16.7000','0005813-36.2023.8.16.7000','0005815-06.2023.8.16.7000','0005823-80.2023.8.16.7000','0005848-93.2023.8.16.7000','0005873-09.2023.8.16.7000','0006030-79.2023.8.16.7000','0006031-64.2023.8.16.7000','0006041-11.2023.8.16.7000','0006042-93.2023.8.16.7000','0006237-78.2023.8.16.7000','0006492-36.2023.8.16.7000','0006493-21.2023.8.16.7000','0006648-24.2023.8.16.7000','0006677-74.2023.8.16.7000','0006750-46.2023.8.16.7000','0006752-16.2023.8.16.7000','0006753-98.2023.8.16.7000','0006756-53.2023.8.16.7000','0006757-38.2023.8.16.7000','0006990-35.2023.8.16.7000','0007042-31.2023.8.16.7000','0007186-05.2023.8.16.7000','0007257-07.2023.8.16.7000','0007259-74.2023.8.16.7000','0007715-24.2023.8.16.7000','0007919-68.2023.8.16.7000','0007984-63.2023.8.16.7000','0008004-54.2023.8.16.7000','0008007-09.2023.8.16.7000','0008009-76.2023.8.16.7000','0008010-61.2023.8.16.7000','0008012-31.2023.8.16.7000','0008187-25.2023.8.16.7000','0008294-69.2023.8.16.7000','0008416-82.2023.8.16.7000','0008433-21.2023.8.16.7000','0009235-19.2023.8.16.7000','0009241-26.2023.8.16.7000','0009242-11.2023.8.16.7000','0009308-88.2023.8.16.7000','0009419-72.2023.8.16.7000','0009483-82.2023.8.16.7000','0009645-77.2023.8.16.7000','0009785-14.2023.8.16.7000','0009795-58.2023.8.16.7000','0009829-33.2023.8.16.7000','0010075-29.2023.8.16.7000','0010205-19.2023.8.16.7000','0010236-39.2023.8.16.7000','0010383-65.2023.8.16.7000','0010577-65.2023.8.16.7000','0010804-55.2023.8.16.7000','0010942-22.2023.8.16.7000','0011174-34.2023.8.16.7000','0011175-19.2023.8.16.7000','0011179-56.2023.8.16.7000','0011180-41.2023.8.16.7000','0011432-44.2023.8.16.7000','0011433-29.2023.8.16.7000','0011439-36.2023.8.16.7000','0011440-21.2023.8.16.7000','0000007-83.2024.8.16.7000','0000142-95.2024.8.16.7000','0000159-34.2024.8.16.7000','0000261-56.2024.8.16.7000','0000283-17.2024.8.16.7000','0000313-52.2024.8.16.7000','0000317-89.2024.8.16.7000','0000318-74.2024.8.16.7000','0000320-44.2024.8.16.7000','0000331-73.2024.8.16.7000','0000337-80.2024.8.16.7000','0000385-39.2024.8.16.7000','0000387-09.2024.8.16.7000','0000389-76.2024.8.16.7000','0000390-61.2024.8.16.7000','0000398-38.2024.8.16.7000','0000399-23.2024.8.16.7000','0000741-34.2024.8.16.7000','0000793-30.2024.8.16.7000','0000794-15.2024.8.16.7000','0000821-95.2024.8.16.7000','0000822-80.2024.8.16.7000','0000823-65.2024.8.16.7000','0000825-35.2024.8.16.7000','0000826-20.2024.8.16.7000','0000827-05.2024.8.16.7000','0000942-26.2024.8.16.7000','0001066-09.2024.8.16.7000','0001155-32.2024.8.16.7000','0001413-42.2024.8.16.7000','0001615-19.2024.8.16.7000','0001620-41.2024.8.16.7000','0001625-63.2024.8.16.7000','0001632-55.2024.8.16.7000','0001661-08.2024.8.16.7000','0001662-90.2024.8.16.7000','0001664-60.2024.8.16.7000','0001665-45.2024.8.16.7000','0001667-15.2024.8.16.7000','0001745-09.2024.8.16.7000','0001894-05.2024.8.16.7000','0002030-02.2024.8.16.7000','0002045-68.2024.8.16.7000','0002048-23.2024.8.16.7000','0002052-60.2024.8.16.7000','0002059-52.2024.8.16.7000','0002093-27.2024.8.16.7000','0002096-79.2024.8.16.7000','0002097-64.2024.8.16.7000','0002105-41.2024.8.16.7000','0002121-92.2024.8.16.7000','0002129-69.2024.8.16.7000','0002218-92.2024.8.16.7000','0002241-38.2024.8.16.7000','0002322-84.2024.8.16.7000','0002454-44.2024.8.16.7000','0002459-66.2024.8.16.7000','0002731-60.2024.8.16.7000','0002738-52.2024.8.16.7000','0002739-37.2024.8.16.7000','0002741-07.2024.8.16.7000','0002742-89.2024.8.16.7000','0002744-59.2024.8.16.7000','0002808-69.2024.8.16.7000','0003001-84.2024.8.16.7000','0003003-54.2024.8.16.7000','0003006-09.2024.8.16.7000','0003007-91.2024.8.16.7000','0003054-65.2024.8.16.7000','0003055-50.2024.8.16.7000','0003309-23.2024.8.16.7000','0003697-23.2024.8.16.7000','0003998-67.2024.8.16.7000','0004001-22.2024.8.16.7000','0004003-89.2024.8.16.7000','0004009-96.2024.8.16.7000','0004010-81.2024.8.16.7000','0004012-51.2024.8.16.7000','0004013-36.2024.8.16.7000','0004017-73.2024.8.16.7000','0004019-43.2024.8.16.7000','0004020-28.2024.8.16.7000','0004025-50.2024.8.16.7000','0004026-35.2024.8.16.7000','0004051-48.2024.8.16.7000','0004054-03.2024.8.16.7000','0004059-25.2024.8.16.7000','0004060-10.2024.8.16.7000','0004063-62.2024.8.16.7000','0004086-08.2024.8.16.7000','0004087-90.2024.8.16.7000','0004102-59.2024.8.16.7000','0004134-64.2024.8.16.7000','0004286-15.2024.8.16.7000','0004301-81.2024.8.16.7000','0004331-19.2024.8.16.7000','0004554-69.2024.8.16.7000','0004590-14.2024.8.16.7000','0004679-37.2024.8.16.7000','0004760-83.2024.8.16.7000','0004761-68.2024.8.16.7000','0004762-53.2024.8.16.7000','0004855-16.2024.8.16.7000','0004863-90.2024.8.16.7000','0004865-60.2024.8.16.7000','0004869-97.2024.8.16.7000','0005065-67.2024.8.16.7000','0005122-85.2024.8.16.7000','0005165-22.2024.8.16.7000','0005209-41.2024.8.16.7000','0005228-47.2024.8.16.7000','0005235-39.2024.8.16.7000','0005247-53.2024.8.16.7000','0005249-23.2024.8.16.7000']


for processo in processos:
    # Selecionar "Qualquer Processo"
    radio_button = driver.find_element(By.XPATH, '//input[@type="radio" and @name="filtroAdvogado" and @value="qualquerAdvogado"]')
    radio_button.click()
    slp(2)

    # Digitar Número do Processo 
    numero_processo_element = driver.find_element(By.XPATH, '//*[@id="numeroProcesso"]')
    numero_processo_element.send_keys(processo)
    #slp(2)
    #numero_processo_element.send_keys(Keys.TAB)
    slp(2)
    search_button = driver.find_element(By.ID, "pesquisar")
    search_button.click()
    slp(2)
    buscar_numero_processo_por_xpath = driver.find_elements(By.XPATH, '/html/body/div[1]/div[2]/form/table[2]/tbody/tr/td[2]/a[1]')
    #pdb.set_trace()
    #buscar_numero_processo_por_xpath.click()
    for element in buscar_numero_processo_por_xpath:
        element.click()
        break
        #print(element)
        #pdb.set_trace()
    slp(7)
    print("Go TRU!")
    
    habilitacao = driver.find_element(By.ID, "habilitacaoProvisoriaButton")    
    habilitacao.click()
    slp(4)

    chceckbox_habilitacao = driver.find_element(By.XPATH, '//*[@id="termoAceito"]')
    chceckbox_habilitacao.click()
    slp(4)

    habilitacao_salvar_button = driver.find_element(By.ID, "saveButton")
    habilitacao_salvar_button.click()
    slp(3)

    export_button_arrow = driver.find_element(By.ID, "btnMenuExportar")
    export_button_arrow.click()
    slp(3)

    export_button = driver.find_element(By.ID, "exportarProcessoButton")
    #pdb.set_trace()
    export_button_full = driver.find_element(By.XPATH,'//*[@id="exportarProcessoButton"][@value="Tudo"]')
    export_button_full.click() 
    slp(4)

    export_button = driver.find_element(By.CLASS_NAME, "a8k")
    export_button.click() 
    slp(3)

    driver.get(f"https://projudi.tjpr.jus.br/projudi/processo/buscaProcessosQualquerInstancia.do?_tj={token}")
    slp(4)





driver.quit()


